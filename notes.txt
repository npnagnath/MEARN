Node Js
An open-source server-side runtime javascript environment which provides a rich library of various JavaScript modules to simplify the development of web applications.  
─
History
Node.js was originally written by Ryan Dahl in 2009 [ JS based].
In January 2010, a package manager was introduced for the Node.js environment called npm.
In June 2011, Microsoft and Joyent implemented a native Windows version of Node.js.
The first Node.js build supporting Windows was released in July 2011.
In September 2015, Node.js v0.12 and io.js v3.3 were merged back together into Node v4.0. This brought V8 ES6 features into Node.js, and a long-term support release cycle.

Overview
Node.js is an open-source server-side runtime environment built on Chrome's V8 JavaScript engine. 
Node.js allows you to run JavaScript on the server.
It provides an event-driven, non-blocking (asynchronous) I/O and cross-platform runtime environment for building highly scalable server-side applications using JavaScript.
It is used to develop I/O intensive web applications like video streaming sites, single-page applications, and other web applications.

Node.js official website: https://nodejs.org

Advantages of Node.js
Node.js is an open-source under the MIT license. (MIT license is a free software license originating at the Massachusetts Institute of Technology (MIT).)
Uses JavaScript to build an entire server-side application.
A lightweight framework that includes bare minimum modules. Other modules can be included as per the need of an application.
Asynchronous by default. So it performs faster than other frameworks.
A cross-platform framework that runs on Windows, MAC or Linux.
Setup Development Environment
The following tools/SDK are required for developing a Node.js application on any platform.

Node.js
Node Package Manager (NPM)
IDE (Integrated Development Environment) or Text Editor

NPM (Node Package Manager) is included in Node.js installation since Node version 0.6.0., so there is no need to install it separately.

Install Node.js on Windows
Visit Node.js official web site https://nodejs.org
It will automatically detect OS and display download links as per your Operating System.

 node node-example.js
Node.js Basics
Primitive Types and Non-Primitive Types:
Node.js includes the following primitive types:

String
Number
Boolean
Undefined
Null
Array
Object

Loose Typing
JavaScript in Node.js supports loose typing like the browser's JavaScript. 
Use the var keyword to declare a variable of any type.

Object Literal

Object literal syntax is the same as the browser's JavaScript.
---------------------------------------------------------------------------------------------------------------------
var obj = {
    name: 'Ryan Dahl',
    language: 'Node.js'
}
(name, age)
return = {name, age}
---------------------------------------------------------------------------------------------------------------------

Functions   

A function can have attributes and properties also. It can be treated like a class in JavaScript.

Example: Function
---------------------------------------------------------------------------------------------------------------------

function Display(x) { 
    console.log(x);
}
Display(100);
---------------------------------------------------------------------------------------------------------------------

Buffer

Node.js includes an additional data type called Buffer (not available in browser's JavaScript). 
Buffer is mainly used to store binary data while reading from a file or receiving packets over the network.
REPL commands.

The following table lists important REPL commands.
REPL stands for Read Eval Print Loop and it represents a computer environment like a Windows console or Unix/Linux shell where a command is entered and the system responds with an output in an interactive mode. Node.js or Node comes bundled with a REPL environment. It performs the following tasks −
Read − Reads user's input, parses the input into JavaScript data-structure, and stores it in memory.
Eval − Takes and evaluates the data structure.
Print − Prints the result.
Loop − Loops the above command until the user presses ctrl-c twice.
The REPL feature of Node is very useful in experimenting with Node.js codes and to debug JavaScript codes.
To simplify your learning, we have set up an easy to use Node.js REPL environment online, where you can practice Node.js syntax − Launch Node.js REPL Terminal 
Starting REPL
REPL can be started by simply running node on shell/console without any arguments as follows.
$ node

You will see the REPL Command prompt > where you can type any Node.js command −
$ node
>

Simple Expression
Let's try a simple mathematics at the Node.js REPL command prompt −
$ node
> 1 + 3
4
> 1 + ( 2 * 3 ) - 4
3
>

Use Variables
You can make use of variables to store values and print later like any conventional script. If var keyword is not used, then the value is stored in the variable and printed. Whereas if var keyword is used, then the value is stored but not printed. You can print variables using console.log().
$ node
> x = 10
10
> var y = 10
undefined
> x + y
20
> console.log("Hello World")
Hello World
undefined

Multiline Expression
Node REPL supports multiline expressions similar to JavaScript. Let's check the following do-while loop in action −
$ node
> var x = 0
undefined
> do {
   x++;
  console.log("x: " + x);
   } 
while ( x < 5 );
x: 1
x: 2
x: 3
x: 4
x: 5
undefined
>

... comes automatically when you press Enter after the opening bracket. Node automatically checks the continuity of expressions.
Underscore Variable
You can use underscores (_) to get the last result −
$ node
> var x = 10
undefined
> var y = 20
undefined
> x + y
30
> var sum = _
undefined
> console.log(sum)
30
undefined
>

Stopping REPL
As mentioned above, you will need to use ctrl-c twice to come out of Node.js REPL.
$ node
>
(^C again to quit)
>

---------------------------------------------------------------------------------------------------------------------

REPL Command	Description
.help				Display help on all the commands
tab Keys			Display the list of all commands.
Up/Down Keys		See previous commands applied in REPL.
.save filename		Save current Node REPL session to a file.
.load filename		Load the specified file in the current Node REPL session.
ctrl + c			Terminate the current command.
ctrl + c (twice)		Exit from the REPL.
ctrl + d			Exit from the REPL.
.break			Exit from multiline expressions.
.clear				Exit from multiline expressions.
---------------------------------------------------------------------------------------------------------------------

Process Object

[1 UI: Data View: WindowObj ]    [2. Server: Data pro: ProcessObj ] [ 3. DB: Data sto :JSONObj ]

Each Node.js script runs in a process. It includes a process object to get all the information about the current process of Node.js applications.

The following example shows how to get process information in REPL using a process object.
---------------------------------------------------------------------------------------------------------------------
> process.execPath 
'C:\\Program Files\\nodejs\\node.exe'
> process.pid
1652
> process.cwd()
'C:\\'
---------------------------------------------------------------------------------------------------------------------

Module in Node.js 
“Module in Node.js is a simple or complex functionality organized in single or multiple JavaScript files which can be reused throughout the Node.js application.”

Each module in Node.js has its own context, so it cannot interfere with other modules or pollute the global scope. Also, each module can be placed in a separate .js file under a separate folder.

Node.js implements CommonJS modules standard  [ https://requirejs.org/docs/commonjs.html ]. CommonJS is a group of volunteers who define JavaScript standards for web-server, desktop, and console applications.

Module Types

Node.js includes three types of modules:

Core Modules [ http ]
Local Modules [ AppRoutingModule ]
Third Party Modules [ ngTable module ]

NodeJs Core Modules

Node.js is a lightweight framework. The core modules include bare minimum functionalities of Node.js. These core modules are compiled into its binary distribution and loaded automatically when Node.js processes start. However, you need to import the core module first in order to use it in your application.

The following table lists some of the important core modules in Node.js.


Core Module
Description
http
http module includes classes, methods and events to create Node.js http server.
url
The url module includes methods for URL resolution and parsing.
querystring
The querystring module includes methods to deal with query strings.
path
The path module includes methods to deal with file paths.
fs
fs module includes classes, methods, and events to work with file I/O.
util
The util module includes utility functions useful for programmers.




Loading Core Modules

In order to use Node.js core or NPM modules, you first need to import it using require() function as shown below.
---------------------------------------------------------------------------------------------------------------------

 
var http = require("http");
// obj = import 'module Name'
 

-------------------------------------------------------------------------------------------------------------

As per above syntax, specify the module name in the require() function. The require() function will return an object, function, property or any other JavaScript type, depending on what the specified module returns.

The following example demonstrates how to use Node.js http module to create a web server.

Example: Load and Use Core http Module
---------------------------------------------------------------------------------------------------------------------

var http = require("http");
// obj = import 'module Name'
var server = http.createServer(function (req, res) {
 //write code here
});
server.listen(5000); // client port
 

---------------------------------------------------------------------------------------------------------------------
In the above example, require() function returns an object because http module returns its functionality as an object, you can then use its properties and methods using dot ( . )  notation e.g. http.createServer().


Node.Js Local Modules

Local modules are modules created locally in your Node.js application. 
These modules include different functionalities of your application in separate files and folders. 
You can also package it and distribute it via NPM, so that the Node.js community can use it. 
For example, if you need to connect to MongoDB and fetch data then you can create a module for it, which can be reused in your application.

Writing a Simple Module:
Let's write a simple logging module which logs the information, warning or error to the console.

In Node.js, the module should be placed in a separate JavaScript file. So, create a Log.js file and write the following code in it.


log.js
---------------------------------------------------------------------------------------------------------------------

var log = {
 info: function (info) {
   console.log("Info: " + info);
 },
 warning: function (warning) {
   console.log("Warning: " + warning);
 },
 error: function (error) {
   console.log("Error: " + error);
 },
};
 
module.exports = log;
 

---------------------------------------------------------------------------------------------------------------------



In the above example of the logging module, we have created an object with three functions - info(), warning() and error(). At the end, we have assigned this object to module.exports. The module.exports in the above example exposes a log object as a module.

The module.exports is a special object which is included in every JS file in the Node.js application by default. Use module.exports or exports to expose a function, object or variable as a module in Node.js.

Now, let's see how to use the above logging module in our application.
Loading Local Module
To use local modules in your application, you need to load it using require() function in the same way as core module. However, you need to specify the path of the JavaScript file of the module.
The following example demonstrates how to use the above logging module contained in Log.js.

app.js
---------------------------------------------------------------------------------------------------------------------
var myLogModule = require("./log.js");
console.log("myLogModule : ", myLogModule);
myLogModule.info("Node.js started");
 
---------------------------------------------------------------------------------------------------------------------

In the above example, app.js is using a log module. First, it loads the logging module using require() function and the specified path where the logging module is stored. The logging module is contained in the Log.js file in the root folder. So, we have specified the path './Log.js' in the require() function. The '.' denotes a root folder.

The require() function returns a log object because the logging module exposes an object in Log.js using module.exports. So now you can use the logging module as an object and call any of its functions using dot notation e.g myLogModule.info() or myLogModule.warning() or myLogModule.error().


Run the above example using the command prompt (in Windows) as shown below.

C:\> node app.js 
Info: Node.js started

module.exports
We will learn how to expose different types as a module using module.exports.

The module.exports or exports is a special object which is included in every JS file in the Node.js application by default. 
The module is a variable that represents the current module and exports is an object that will be exposed as a module.
So, whatever you assign to module.exports or exports, will be exposed as a module.

Let's see how to expose different types as a module using module.exports.

Export Literals
The following example exposes a simple string message as a module in Message.js.

message.js
----------------------------------------------------------------------------------------------------
// module.exports = "Hello world";
 
exports.msg = "Hello world";
 
// {
//   lit: {
//     msg: "Hello world";
//   }
// }
 

----------------------------------------------------------------------------------------------------

import this message module and use it as shown below.

app.js
----------------------------------------------------------------------------------------------------
var lit = require("./literals");
console.log("lit : ", lit);
console.log("lit : ", lit.msg);
 

----------------------------------------------------------------------------------------------------

Note: 
You must specify './' as a path to the root folder to import a local module. However, you do not need to specify a path to import Node.js core module or NPM module in the require() function.

Export Object
exports is an object. So, you can attach properties or methods to it. The following example exposes an object with a string property in Message.js file. 

message.js

exports.SimpleMessage = 'Hello world';
//or module.exports.SimpleMessage = 'Hello world';

we have attached a property "SimpleMessage" to the exports object. Now, import and use this module as shown below.

app.js

var msg = require('./Messages.js'); 
console.log(msg.SimpleMessage);

In the above example, require() function will return an object { SimpleMessage : 'Hello World'} and assign it to the msg variable. So, now you can use msg.SimpleMessage.

Run the above example by writing node app.js in the command prompt and see the output as shown below.

C:\> node app.js 
 Hello World. 
-------------------------------------------------------------------------------------------------------------------
The same way as above, you can expose an object with function. The following example exposes an object with log function as a module.

Log.js
module.exports.log = function (msg) {
 console.log(msg);
};
 

 
The above module will expose an object- 
 
{ 
log : function(msg){ 
console.log(msg); 
}
} 
 
Use the above module as shown below.

app.js

var msg = require("./log.js");
console.log("msg", msg);
msg.log("Hello World");
 



C:\> node app.js 
Hello World
--------------------------------------------------------------------
You can also attach an object to module.exports as shown below.

data.js
module.exports = {
 firstName: "James",
 lastName: "Bond",
};
 

app.js
var person = require("./data.js");
 
// API : object
 
console.log(person.firstName + " " + person.lastName);
 

Run the above example and see the result as shown below.
C:\> node app.js 
James Bond
--------------------------------------------------------------------

Export Function
You can attach an anonymous function to the exports object as shown below.

Log.js

module.exports = function (msg) { 
console.log(msg); 
};



Now, you can use the above module as below.

app.js

var msg = require('./Log.js'); 
msg('Hello World'); 


The msg variable becomes a function expression in the above example. So, you can invoke the function using parenthesis (). Run the above example and see the output as shown below.
C:\> node app.js 
Hello World
--------------------------------------------------------------------

Export function as a class
In JavaScript, a function can be treated like a class. The following example exposes a function which can be used like a class.
Person.js

module.exports = function (firstName, lastName) {
 this.firstName = firstName;
 this.lastName = lastName;
 this.fullName = function () {
   return this.firstName + " " + this.lastName;
 };
};
 
 
// IIFE     or      fatArrow


The above module can be used as shown below.

app.js
var person = require("./Person.js");
console.log("person : ", person);
 
var person1 = new person("James", "Bond");
console.log(person1.fullName());
 

As you can see, we have created a personal object using a new keyword. Run the above example as below.
C:\> node app.js 
James Bond
In this way, you can export and import a local module created in a separate file under the root folder.

Node.js also allows you to create modules in sub folders. Let's see how to load modules from sub folders.


 

What is Callback [ setTimeOut, setInterval, eves, etc ]?   CallBackHell -> Promises -> async-await-> Observables
Callback is an asynchronous equivalent for a function. A callback function is called at the completion of a given task. Node makes heavy use of callbacks. All the APIs of Node are written in such a way that they support callbacks.

Blocking Code

 
var fs = require("fs");
var data = fs.readFileSync("file.txt");
console.log(data.toString()); // Not, Warn, Fat, Par
console.log("Task Completed Successfully..!");
 

Non-Blocking Code 

 
 
var fs = require("fs");
 
fs.readFile('file.txt', function (err, data) {
  if (err) return console.error(err);
  	console.log(data.toString());
	console.log("Task Completed Successfully...");
});
 





Redirecting requests
var http = require("http"); // Import Node.js core module
var server = http.createServer(function (req, res) {
 //create web server
 
 if (req.url == "/") {
   res.writeHead(200, { "Content-Type": "text/html" });
   res.write('<form action="send" method="post">'); // GET -> PARAMOBJ, POST-> BODYObj
   res.write('<input type="text" ><br>');
   res.write('<input type="submit">');
   res.write("</form>");
   return res.end();
 } else if (req.url == "/send" && req.method === "POST") {
   res.statusCode = 302;
   res.setHeader("Location", "/");
   return res.end();
 } else res.end("Invalid Request!");
});
server.listen(5000); //6 - listen for any incoming requests
 

Nodejs Framework





Express JS
Makes Node.js web application development fast and easy.

Advantages Of Express.js
Easy to configure and customize.
Allows you to define routes of your application based on HTTP methods and URLs.
Includes various middleware [ Mongoose ] modules which you can use to perform additional tasks on request and response.
Easy to integrate with different template engines like KendoUI, Jade, Vash, EJS etc. 
Allows you to define an error handling middleware.
Easy to serve static files and resources of your application.
Allows you to create a REST API server.
Easy to connect with databases such as MongoDB, Redis, MySQL.
Installation :
You can install express.js using npm. The following command will install the latest version of express.js globally on your machine so that every Node.js application on your machine can use it.

node.js


express


The following command will create package.json  for  express.js in the project folder.
2> npm init --yes

The following command will install the latest version of express.js globally in your project folder.
1> npm install -g express


The following command will install the latest version of express.js local to your project folder.
3> npm install express --save
As you know, --save will update the package.json file by specifying express.js dependency.

npm install -g nodemon             [ nodemon filename : ex. nodemon app.js ]
npm install nodemon




{ Mongo: DB }

MongoDB was created by Dwight Merriman and Eliot Horowitz, who had encountered development and scalability issues with traditional relational database approaches while building Web applications at DoubleClick, an Internet advertising company that is now owned by Google Inc. 

According to Merriman, the name of the database was derived from the word humongous to represent the idea of supporting large amounts of data. Merriman and Horowitz helped form 10Gen Inc. in 2007 to commercialize MongoDB and related software. The company was renamed MongoDB Inc. in 2013. 

The database was released to open source in 2009 and is available under the terms of the Free Software Foundation's GNU AGPL Version 3.0 commercial license. 


What is Data?  :                         ‘Alex’
In simple words, data can be facts related to any object in consideration.
For example, your name, age, height, weight, etc are some data related to you.
A picture , image , file , pdf etc can also be considered data.


What is a Database?                 | Alex | Mumbai | 828988898 | 

The database is a systematic collection of data. 
Databases support storage and manipulation of data. 
Databases make data management easy. Let's discuss a few examples.

An online telephone directory would definitely use a database to store data pertaining to people, phone numbers and other contact details, etc.

Your electricity service provider is obviously using a database to manage billing, client related issues, to handle fault data, etc.
Let's also consider Facebook. It needs to store, manipulate and present data related to members, their friends, member activities, messages, advertisements and a lot more.


What is a Database Management System (DBMS)?          |Ali |Khan | 
Database Management System (DBMS) is a collection of programs which enables its users to access the database, manipulate data, and report/representation of data.

It also helps to control access to the database.

Database Management Systems are not a new concept and as such had been first implemented in the 1960s.





Relational DBMS 
This type of DBMS defines database relationships in the form of tables, also known as relations. 
Unlike network DBMS, RDBMS does not support many to many relationships.
Relational DBMS usually have pre-defined data types that they can support. 
This is the most popular DBMS type in the market. 
Examples of relational database management systems include MySQL, Oracle, and Microsoft SQL Server database.





pData - eduData - jobData - handData - j&kData - sportData

What is SQL?   [ queries = commands ]
Structured Query Language (SQL) pronounced as "S-Q-L" or sometimes as "Se-Quel" is actually the standard language for dealing with Relational Databases.

SQL programming can be effectively used to insert, search, update, delete ( Create, Read, Update, Delete ) database records.

That doesn't mean SQL cannot do things beyond that.

In fact, it can do a lot of things including, but not limited to, optimizing and maintenance of databases. 

Relational databases like MySQL Database, Oracle, MSSQL Server, Sybase, etc use SQL! How to use SQL syntaxes?

 SQL syntaxes used in these databases are almost similar, except the fact that some are using a few different syntaxes and even proprietary SQL syntaxes.

SQL Example

 SELECT * FROM Members WHERE Age > 30 






What is NoSQL?
NoSQL is an upcoming category of Database Management Systems. 
Its main characteristic is its non-adherence to Relational Database Concepts. NoSQL means "Not Only SQL". 

The concept of NoSQL databases grew with internet giants such as Google, Facebook, Amazon etc who deal with gigantic volumes of data.

When you use a relational database for massive volumes of data, the system starts getting slow in terms of response time.

To overcome this, we could of course "scale up" our systems by upgrading our existing hardware.

The alternative to the above problem would be to distribute our database load on multiple hosts as the load increases.

This is known as "scaling out".

 NoSQL databases are non-relational databases that scale out better than relational databases and are designed with web applications in mind.

They do not use SQL to query the data and do not follow strict schemas like relational models. With NoSQL, ACID (Atomicity, Consistency, Isolation, Durability) features are not guaranteed.

NoSQL database
NoSQL databases are useful for large sets of distributed data.

NoSQL databases are effective for big data performance issues that relational databases aren't built to solve. 
They are most effective when an organization must analyze large chunks of unstructured data or data that are stored across multiple virtual servers in the cloud.


Purpose to build MongoDB : JS -> {JSON}
     "What was the need for MongoDB although there were many databases in action?"

This is a very simple answer:

“All modern applications require big data, fast features development, flexible deployment and the older database systems are not competent enough, so the MongoDB was obviously needed.”

The main purpose to build MongoDB:

Scalability : scale-up and scale-out
Performance : High performance [ with DevOps ]
High Availability : high req and res handling
Scaling from single server deployments to large, complex multi-site architectures.

Key points of MongoDB: 

Develop Faster
Deploy Easier
Scale Bigger



Database: in Mongo
The database is a physical container for collections. Each DB gets its own set of files on the file system.
A single MongoDB server typically has multiple databases.

Collection :

A collection is a group of an RDBMS table. A collection exists within a single database. Documents within a collection can have different fields. Typically, all documents in a collection are of similar or related purpose.




Document :

A document is a set of key-value pairs. Documents have a dynamic schema. Dynamic schema means that documents in the same set of fields or structure and common fields in a collection's documents may hold different types of data.



Features of MongoDB
These are some important features of MongoDB:

1.  Support ad hoc queries

In MongoDB, you can search by field, range query and it also supports regular expression searches.

2. Indexing

You can index any field in a document.

3. Replication

MongoDB supports Master-Slave replication.

A master can perform Reads and Writes and a Slave copies data from the master and can only be used for reads or back up (not writes)

4. Duplication of data

MongoDB can run over multiple servers. The data is duplicated to keep the system up and also keep its running condition in case of hardware failure.

5. Load balancing

It has an automatic load balancing configuration because of data placed in shards.

6. Supports map reduce and aggregation tools.

7. Uses JavaScript instead of Procedures.

8. It is a schema-less database written in C++.  [ Mongoose ]

9. Provides high performance.

10. Stores files of any size easily without complicating your stack.

11. Easy to administer in the case of failures.

12. It also supports:

JSON data model with dynamic schemas
Auto-sharding for horizontal scalability
Built-in replication for high availability


Example of a database:

MongoDB stores data as documents, so it is known as the document-oriented database. It is a key feature of MongoDB. It offers document-oriented storage. It is very simple and you can program it easily.

<script>
 var a = {
   // abcd...
   FirstName: ‘Ajeet’,
   Address: "Laxmi Nagar",
   Spouse: [{ Name: "Charu" }],
   FirstName: "Ravi",
   Address: "Loni",
 };
</script>
 


{
 "FirstName": "Ajeet",
 "Address": "Laxmi Nagar",
 "Spouse": [{ "Name": "Charu" }],
 "SecondName": "Ravi",
 "NewAddress": "Loni"
}
 



There are two different documents (separated by ".").

Storing data in this manner is called the document-oriented database.


The following table shows the relationship of RDBMS terminology with MongoDB.
RDBMS
MongoDB
Database
Database
Table
Collection
Tuple/Row
Document
column
Field
Table Join
Embedded Documents
Primary Key
Default key _id provided by MongoDB itself


Installation:

1) mongodb.com -> find the download section ( then download the MongoDB according to O.S.)

2) Search for MongoDB Community Server install the downloaded msi  / exe (complete version )

3) create folders C:/data/db ( to store data of mongo )

4) goto c-> Program files-> MongoDB-> Server-> 3.4-> bin

mongod --dbpath=‘/..../data/db’: to establish a connection with DB       [ ‘/..../data/db’  -> path to ‘db’ folder ]

mongo: mongo shell for queries


5) press right click and open CMD from the same folder (it will show the same address as folder address..)

6) enter: mongod to activate the server

7) open another CMD with the same process and run the "mongo" command.

8) > db ( run : to check db )

9) to avoid the open CMD from the same folder we need to set an environment variable.

10) copy the folder URL (up to bin) 
11) right click on my computer ( on desktop ) and select properties -> advanced system settings -> environment variables -> choose path from variables ->
press edit button -> add semicolon in variable value and paste the URL address -> press ok -> ok -> ok






$ cd ~/Download
$ tar xzf mongodb-osx-x86_64-2.2.3.tgz                          [ unzip ] 
          create  MongoDB Data directory                                                 [ to store data ]
$ sudo mkdir -p /data/db                               
                                       …..source…….                           …...destination…..
$ sudo mv mongodb-osx-x86_64-2.2.3  /usr/local/mongodb      [  mac’s installed app session ]

$ whoami          [ to find username ]
apple
$ sudo chown apple /data/db

Set mongodb/bin to $PATH
$ cd 
$ pwd                [ present working directory ]
/Users/apple
$ touch .bash_profile
$ open .bash_profile

export MONGO_PATH=/usr/local/mongodb
export PATH=$PATH:$MONGO_PATH/bin           [ after paste both lines, save ( cmd + s ) and close]

$ source .bash_profile             [ to reload file ]


> cd
>root
>pwd

In first terminal run mongod to start and connect server

mongod --dbpath /usr/local/mongo/data/db




In second terminal run mongo to start MongoDB shell

 
MongoDB Data Types : JSON Based [ Javascript: Datatypes, Logic, Syntax, Errors ]
Following is a list of usable data types in MongoDB.
 
Data Types
Description
String
The string is the most commonly used data type. It is used to store data. A string must be UTF 8 valid in MongoDB.
Integer
Integer is used to store the numeric value. It can be 32 bit or 64 bit depending on the server you are using.
Boolean
This datatype is used to store boolean values. It just shows YES/NO values.
Double
Double datatype stores floating point values.
Min/Max Keys
This data type compares a value against the lowest and highest bison elements.
Arrays
This datatype is used to store a list or multiple values into a single key.
Object
Object data type is used for embedded documents.
Null
It is used to store null values.
Symbol
It is generally used for languages that use a specific type.
Date
This data type stores the current date or time in Unix time format. It makes it possible to specify your own date time by creating an object of date and passing the value of the date, month, the year into it.






Command:     	use  ‘dbname’
			use( )       -> function    ex.     hide( )
			obj.use( )  -> method   ex.     document.write( )

use: to create DB or to switch in that DB if already created.
	Ex.     use <dbName>                                         [ switched to DB dbName ]
DB: to know current DB 
	Ex.     DB                                                      [  dbName ]
show   to know current   
	Ex.     show dbs                                                  [  admin   0.000GB
config  0.000GB
local   0.000GB ]




MongoDB Shell
MongoDB has a JavaScript shell that allows interaction with MongoDB instances from the command line.

If you want to create a table, you should name the table and define its column and each column's data type.

The shell is useful for performing administrative functions and running instances.

How to run the shell
To start the shell, open a command prompt, run it as an administrator then run the mongo executable:


$ mongod   
  	To connect
$ mongo   

MongoDB shell version: 2.4.0
Connecting to: test
																																															
You should start MongoDB before starting the shell because the shell automatically attempts to connect to a MongoDB server on startup.

The shell is a full-featured JavaScript interpreter. It is capable of running an Arbitrary JavaScript program.

Let us take a simple mathematical program:

>x= 100  
100  

>x/ 5;  
20  

> console/shell:  js     node    mongo

You can also use the JavaScript libraries

> "Hello, World!".replace("World", "MongoDB");  
Hello, MongoDB! 



You can even define and call JavaScript functions

> function factorial (n) {  
if (n <= 1) return 1;  
return n * factorial(n - 1);  
}  
  
> factorial (5);  
  
120  


Note: You can create multiple commands.

When you press "Enter", the shell detects whether the JavaScript statement is complete or not.

If the statement is not completed, the shell allows you to continue writing it on the next line. If you press "Enter" three times in a row, it will cancel the half-formed command and get you back to the > - prompt.



Data Modeling in MongoDB

In MongoDB, data has a flexible schema. It is totally different from the SQL database where you had to determine and declare a table's schema before inserting data. MongoDB collections do not enforce document structure.

The main challenge in data modeling is balancing the need for the application, the performance characteristics of the database engine, and the data retrieval patterns.

Consider the following things while designing the schema in MongoDB
Always design schema according to user requirements.
Do join on write operations, not on read operations.
Objects which you want to use together should be combined into one document. Otherwise, they should be separated (make sure that there should not be a need for joins).
Optimize your schema for more frequent use cases.
Do complex aggregation in the schema.
You should duplicate the data but in a limit, because disc space is cheaper than compute time.



For example:

let us take an example of a client who needs a database design for his website. His website has the following requirements:

Every post is distinct (contains the unique title, description, and url).

Every post can have one or more tags.

Every post has the name of its publisher and the total number of likes.

Each post can have zero or more comments and the comments must contain the user name, message, data-time and likes.

For the above requirement, a minimum of three tables are required in RDBMS.

Fig: table structure

ng  ->     $var:builtinEvent      var$:Observable    _var:diOBJ

Json:      []  ,     “”     :   {}

But in MongoDB, schema design will have one collection post and has the following structure:

{
_id: POST_ID        
title: TITLE_OF_POST,
description: POST_DESCRIPTION,
by: POST_BY,
url: URL_OF_POST,
tags: [TAG1, TAG2, TAG3],
likes: TOTAL_LIKES,
comments: [
{
user: 'COMMENT_BY',
message: TEXT,
datecreated: DATE_TIME,
like: LIKES
},
{
user: 'COMMENT_BY',
message: TEST,
dateCreated: DATE_TIME,
like: LIKES
}
]
}

What is BSON in MongoDB?
BSON is a binary serialization format used to store documents and make remote procedure calls in MongoDB. The BSON specification is located at bsonspec.org. Each BSON type has both integer and string identifiers as listed in the following table: Type.

MongoDB Data Types and Corresponding ID Number
Type
Description
Number
Double
Represents a float value.
1
String
BSON strings are UTF-8. In general, drivers for each programming language convert from the language’s string format to UTF-8 when serializing and deserializing BSON. This makes it possible to store most international characters in BSON strings with ease. [1] In addition, MongoDB $regex queries support UTF-8 in the regex string.
2
Object
Represents embedded documents.
3
Array
Sets or lists of values can be represented as arrays:
4
Binary data
Binary data is a string of arbitrary bytes, it cannot be manipulated from the shell.
5
Object id
ObjectIds (MongoDB document identifier, equivalent to a Primary key) are: small, likely unique, fast to generate, and ordered. These values consist of 12-bytes, where the first four bytes are a timestamp that reflects the ObjectId’s creation.
7
Boolean
A logical true or false. Use to evaluate whether a condition is true or false
8
Date
BSON Date is a 64-bit integer that represents the number of milliseconds since the Unix epoch (Jan 1, 1970). This results in a representable date range of about 290 million years into the past and future.
9
Null
It represents both a null value and a nonexistent field.
10
Regular Expression
RegExp maps directly to a Javascript RegExp
11
JavaScript
 
13
Symbol
Not supported by the shell. If the shell gets a symbol from the database, it will convert it into a string.
14
JavaScript (with scope)
 
15
32-bit integer
Numbers without decimal points will be saved as 32-bit integers.
16
Timestamp
BSON has a special timestamp type for internal MongoDB use and is not associated with the regular Date type. Timestamp values are a 64 bit value where :
The first 32 bits are a time_t value (seconds since the Unix epoch).
the second 32 bits are an incrementing ordinal for operations within a given second.
17
64-bit integer
Numbers without a decimal point will be saved and returned as 64-bit integers.
18
Min key
MinKey compares less than all other possible BSON element values, respectively, and exists primarily for internal use.
255
Max key
MaxKey compares greater than all other possible BSON element values, respectively, and exists primarily for internal use.
127





MongoDB Create Database

Use Database method:

There is no database command in MongoDB. Actually, MongoDB does not provide any command to create a database.

It may look like a weird concept, if you are from a traditional SQL background where you need to create a database, table and insert values in the table manually.

Here, in MongoDB you don't need to create a database manually because MongoDB will create it automatically when you save the value into the defined collection at the first time.

You also don't need to mention what you want to create, it will be automatically created at the time you save the value into the defined collection.

Here one thing is very remarkable that you can create a collection manually by "db.createCollection()" but not the database.

How and when to create database
If there is no existing database, the following command is used to create a new database.

						J&K                                            { “J&K” : “Alex”}
			10000		Alex
			9998		           Ali
Working with the mongo Shell
To display the database you are using, type db:
> db 
test 
The operation should return   > test , which is the default database.

To switch databases, issue the use <db> helper, as in the following example:
> use <database>

You can switch to non-existing databases. When you first store data in the database, such as by creating a collection, MongoDB creates the database. For example, the following creates both the database myNewDatabase and the collection myCollection during the insertOne() operation:

> use myNewDatabase    //  var db = myNewDatabase
> db.createCollection(“myCollection”);    //Optional
> db.myCollection.insertOne( { x: 1 } );
{
        "acknowledged" : true,
        "insertedId" : ObjectId("5f3e214c1fbd2a6371f2f990")
}
> db.myCollection.insert( { x: 1 } );
WriteResult({ "nInserted" : 1 })
>
The db.myCollection.insertOne() is one of the methods available in the mongo shell.
db refers to the current database.
myCollection is the name of the collection.
If the mongo shell does not accept the name of a collection, you can use the alternative db.getCollection() syntax. For instance, if a collection name contains a space or hyphen, starts with a number, or conflicts with a built-in function:
select * from myCollection
db.getCollection("myCollection").find();
db.getCollection(var).find();
db.myCollection.find();

 



Syntax:

Use dbName     //  db=dbName

Syntax = >  db.collection.document.method( )    ex. db.createCollection(‘collectionName’);

database.collection.documentMethods( )    ex.   db.collectionName.insert({‘name’: ‘Alex’});


db.dbOpMethod();                         ex . db.dropDatabase()

db.collection.OpMethod()          ex.     db.myCollection.drop()

db.colletion.document.OpMethod()   ex.   db.myCollection.insert( data)

use DATABASE_NAME  
If the database already exists, it will return the existing database.

Let's take an example to demonstrate how a database is created in MongoDB. In the following example, we are going to create a database "demodb".

See this example

>use demodb  
Switched to db demodb


To check the currently selected database, use the command db:

>db  
demodb

To check the database list, use the command show dbs:

>show dbs  
local 0.078GB


Here, your created database "demodb" is not present in the list, insert at least one document into it to display database:

>db.myCollection.insert({"name":"test"})  
WriteResult({ "nInserted": 1})

>show dbs  
demodb 0.000GB
local 0.078GB



MongoDB Drop Database
The dropDatabase command is used to drop a database. It also deletes the associated data files. It operates on the current database.

Syntax:

db.dropDatabase()  
This syntax will delete the selected database. In case you have not selected any database, it will delete default "test" database.

To check the database list, use the command show dbs:

>show dbs  
local 0.078GB
If you want to delete the database "demodb", use the dropDatabase() command as follows:

>use demodb  
switched to the db demodb

>db.dropDatabase()  
{ "dropped": "demodb", "ok": 1}
Now check the list of databases:

>show dbs  
local 0.078GB



MongoDB Create Collection
In MongoDB, db.createCollection(name, options) is used to create a collection. But usually you don?t need to create a collection. MongoDB creates a collection automatically when you insert some documents. It will be explained later. First see how to create collection:

Syntax:

db.createCollection(name, options) 

  
Here,

Name: is a string type, specifies the name of the collection to be created.

Options: is a document type, specifies the memory size and indexing of the collection. It is an optional parameter.



Let's take an example to create a collection. In this example, we are going to create a collection named SSSIT.

>use test  
switched to db test

>db.createCollection("myNewCollection")  
{ "ok" : 1 }

To check the created collection, use the command "show collections".

>show collections  
myNewCollection


How does MongoDB create collection automatically
MongoDB creates collections automatically when you insert some documents. For example: Insert a document named seomount into a collection named SSSIT. The operation will create the collection if the collection does not currently exist.

>db.myNewCollection.insert({"name" : "seomount"})    
>show collections    
myNewCollection  


If you want to see the inserted document, use the find() command.

Syntax:

db.collection_name.find()



MongoDB Drop collection

In MongoDB, db.collection.drop() method is used to drop a collection from a database. It completely removes a collection from the database and does not leave any indexes associated with the dropped collections.

The db.collection.drop() method does not take any argument and produce an error when it is called with an argument. This method removes all the indexes associated with the dropped collection.

Syntax:

db.COLLECTION_NAME.drop()  

MongoDB Drop collection example

Let's take an example to drop collection in MongoDB.

First check the already existing collections in your database.

>use mydb  
Switched to db mydb 

> show collections  
SSSIT
system.indexes

Note: Here we have a collection named SSSIT in our database.

Now drop the collection with the name SSSIT:

>db.SSSIT.drop()  
True

Now check the collections in the database:

>show collections  
System.indexes

Now, there are no existing collections in your database.

Note: The drop command returns true if it successfully drops a collection. It returns false when there is no existing collection to drop.






MongoDB insert documents
In MongoDB, the db.collection.insert() method is used to add or insert new documents into a collection in your database.

Upsert

There are also two methods "db.collection.update()" method and "db.collection.save()" method used for the same purpose. These methods add new documents through an operation called upsert.

Upsert is an operation that performs either an update of existing document or an insert of new document if the document to modify does not exist.

Syntax

>db.COLLECTION_NAME.insert(document)  

Let's take an example to demonstrate how to insert a document into a collection. In this example we insert a document into a collection named demoCollection. This operation will automatically create a collection if the collection does not currently exist.

Example

db.myCollection.insert({
 data: [
   {
     id: 1001,
     name: "Samsung SCREEN 3",
     description: "5.5 Screen for Moto g",
     inStock: 10,
     colorName: "Blue",
     isOnline: false,
     country: "India",
     price: 12000,
     prodImg: "../../../assets/img/mob2.png",
     clsVar: true,
     qntt: 0,
   },
   {
     id: 1002,
     name: "screen 5",
     description: "5 Screen for Samsung",
     inStock: 8,
     colorName: "red",
     isOnline: true,
     country: "Germany",
     price: 12000,
     prodImg: "../../../assets/img/mob2.png",
     clsVar: true,
     qntt: 0,
   },
   {
     id: 1003,
     name: "Key Panel",
     description: "Key panel for Nokia",
     inStock: 12000,
     colorName: "green",
     isOnline: false,
     country: "",
     price: 12000,
     prodImg: "../../../assets/img/mob2.png",
     clsVar: true,
     qntt: 0,
   },
 ],
});
 



After the successful insertion of the document, the operation will return a WriteResult object with its status.

Output:

WriteResult({ "nInserted" : 1 })

Here the nInserted field specifies the number of documents inserted. If an error is occurred then the WriteResult will specify the error information.

Check the inserted documents
If the insertion is successful, you can view the inserted document by the following query.

>db.demoCollection.find()  

You will get the inserted document in return.

Output:

{ "_id" : ObjectId("56482d3e27e53d2dbc93cef8"), "course" : "java", "details" : 
{ "duration" : "6 months", "Trainer" : "Sonoo jaiswal" }, "Batch" : 
[ {"size" : "Small", "qty" : 15 }, { "size" : "Medium", "qty" : 25 } ],
 "category" : "Programming language" }


Note: Here, the ObjectId value is generated by MongoDB itself. It may differ from the one shown.

MongoDB insert multiple documents
If you want to insert multiple documents in a collection, you have to pass an array of documents to the db.collection.insert() method.

Create an array of documents
Define a variable named Allcourses that hold an array of documents to insert.

var Allcourses =  
    [  
      {  
        Course: "Java",  
        details: { Duration: "6 months", Trainer: "Sonoo Jaiswal" },  
        Batch: [ { size: "Medium", qty: 25 } ],  
        category: "Programming Language"  
      },  
      {  
        Course: ".Net",  
        details: { Duration: "6 months", Trainer: "Prashant Verma" },  
        Batch: [ { size: "Small", qty: 5 }, { size: "Medium", qty: 10 }, ],  
        category: "Programming Language"  
      },  
      {  
        Course: "Web Designing",  
        details: { Duration: "3 months", Trainer: "Rashmi Desai" },  
        Batch: [ { size: "Small", qty: 5 }, { size: "Large", qty: 10 } ],  
        category: "Programming Language"  
      }  
    ];  

Inserts the documents
Pass this Allcourses array to the db.collection.insert() method to perform a bulk insert.

> db.demoCollection.insert( Allcourses );  

After the successful insertion of the documents, this will return a BulkWriteResult object with the status.

BulkWriteResult({
   "writeErrors" : [ ],
   "writeConcernErrors" : [ ],
   "nInserted" : 3,
   "nUpserted" : 0,
   "nMatched" : 0,
   "nModified" : 0,
   "nRemoved" : 0,
   "upserted" : [ ]
})

Note: Here the nInserted field specifies the number of documents inserted. In the case of any error during the operation, the BulkWriteResult will specify that error.

You can check the inserted documents by using the following query:

>db.demoCollection.find()  
Insert multiple documents with Bulk
In its latest version of MongoDB (MongoDB 2.6) provides a Bulk() API that can be used to perform multiple write operations in bulk.

You should follow these steps to insert a group of documents into a MongoDB collection.

Initialize a bulk operation builder
First initialize a bulk operation builder for the collection demoCollection.

var bulk = db.demoCollection.initializeUnorderedBulkOp();  
This operation returns an unorder operations builder which maintains a list of operations to perform .

Add insert operations to the bulk object
bulk.insert(  
   {  
     course: "java",  
     details: {  
        duration: "6 months",  
        Trainer: "Sonoo jaiswal"  
     },  
     Batch: [ { size: "Small", qty: 15 }, { size: "Medium", qty: 25 } ],  
     category: "Programming language"  
   }  
);  
Execute the bulk operation
Call the execute() method on the bulk object to execute the operations in the list.

bulk.execute();  
After the successful insertion of the documents, this method will return a BulkWriteResult object with its status.

BulkWriteResult({
   "writeErrors" : [ ],
   "writeConcernErrors" : [ ],
   "nInserted" : 1,
   "nUpserted" : 0,
   "nMatched" : 0,
   "nModified" : 0,
   "nRemoved" : 0,
   "upserted" : [ ]
})

Here the nInserted field specifies the number of documents inserted. In the case of any error during the operation, the BulkWriteResult will specify that error.


Command Helpers
The mongo shell provides various help. The following table displays some common help methods and commands:
Help Methods and Commands
Description
help
Show help.
db.help()
Show help for database methods.
db.<collection>.help()
Show help on collection methods. The <collection> can be the name of an existing collection or a non-existing collection.
show dbs
Print a list of all databases on the server.
The operation corresponds to the listDatabases command. If the deployment runs with access control, the operation returns different values based on user privileges. See listDatabases Behavior for details.
use <db>
Switch the current database to <db>. The mongo shell variable db is set to the current database.
show collections
Print a list of all collections for the current database.
SEE ALSO
show collections
show users
Print a list of users for the current database.
show roles
Print a list of all roles, both user-defined and built-in, for the current database.
show profile
Print the five most recent operations that took 1 millisecond or more. See documentation on the database profiler for more information.
show databases
Print a list of all available databases.
The operation corresponds to the listDatabases command. If the deployment runs with access control, the operation returns different values based on user privileges. See listDatabases Behavior for details.
load()
Execute a JavaScript file. See Write Scripts for the mongo Shell for more information.

