Node Js
An open-source server-side runtime javascript environment which provides a rich library of various JavaScript modules to simplify the development of web applications.  
─
History
Node.js was originally written by Ryan Dahl in 2009 [ JS based].
In January 2010, a package manager was introduced for the Node.js environment called npm.
In June 2011, Microsoft and Joyent implemented a native Windows version of Node.js.
The first Node.js build supporting Windows was released in July 2011.
In September 2015, Node.js v0.12 and io.js v3.3 were merged back together into Node v4.0. This brought V8 ES6 features into Node.js, and a long-term support release cycle.

Overview
Node.js is an open-source server-side runtime environment built on Chrome's V8 JavaScript engine. 
Node.js allows you to run JavaScript on the server.
It provides an event-driven, non-blocking (asynchronous) I/O and cross-platform runtime environment for building highly scalable server-side applications using JavaScript.
It is used to develop I/O intensive web applications like video streaming sites, single-page applications, and other web applications.

Node.js official website: https://nodejs.org

Advantages of Node.js
Node.js is an open-source under the MIT license. (MIT license is a free software license originating at the Massachusetts Institute of Technology (MIT).)
Uses JavaScript to build an entire server-side application.
A lightweight framework that includes bare minimum modules. Other modules can be included as per the need of an application.
Asynchronous by default. So it performs faster than other frameworks.
A cross-platform framework that runs on Windows, MAC or Linux.
Setup Development Environment
The following tools/SDK are required for developing a Node.js application on any platform.

Node.js
Node Package Manager (NPM)
IDE (Integrated Development Environment) or Text Editor

NPM (Node Package Manager) is included in Node.js installation since Node version 0.6.0., so there is no need to install it separately.

Install Node.js on Windows
Visit Node.js official web site https://nodejs.org
It will automatically detect OS and display download links as per your Operating System.

 node node-example.js
Node.js Basics
Primitive Types and Non-Primitive Types:
Node.js includes the following primitive types:

String
Number
Boolean
Undefined
Null
Array
Object

Loose Typing
JavaScript in Node.js supports loose typing like the browser's JavaScript. 
Use the var keyword to declare a variable of any type.

Object Literal

Object literal syntax is the same as the browser's JavaScript.
---------------------------------------------------------------------------------------------------------------------
var obj = {
    name: 'Ryan Dahl',
    language: 'Node.js'
}
(name, age)
return = {name, age}
---------------------------------------------------------------------------------------------------------------------

Functions   

A function can have attributes and properties also. It can be treated like a class in JavaScript.

Example: Function
---------------------------------------------------------------------------------------------------------------------

function Display(x) { 
    console.log(x);
}
Display(100);
---------------------------------------------------------------------------------------------------------------------

Buffer

Node.js includes an additional data type called Buffer (not available in browser's JavaScript). 
Buffer is mainly used to store binary data while reading from a file or receiving packets over the network.
REPL commands.

The following table lists important REPL commands.
REPL stands for Read Eval Print Loop and it represents a computer environment like a Windows console or Unix/Linux shell where a command is entered and the system responds with an output in an interactive mode. Node.js or Node comes bundled with a REPL environment. It performs the following tasks −
Read − Reads user's input, parses the input into JavaScript data-structure, and stores it in memory.
Eval − Takes and evaluates the data structure.
Print − Prints the result.
Loop − Loops the above command until the user presses ctrl-c twice.
The REPL feature of Node is very useful in experimenting with Node.js codes and to debug JavaScript codes.
To simplify your learning, we have set up an easy to use Node.js REPL environment online, where you can practice Node.js syntax − Launch Node.js REPL Terminal 
Starting REPL
REPL can be started by simply running node on shell/console without any arguments as follows.
$ node

You will see the REPL Command prompt > where you can type any Node.js command −
$ node
>

Simple Expression
Let's try a simple mathematics at the Node.js REPL command prompt −
$ node
> 1 + 3
4
> 1 + ( 2 * 3 ) - 4
3
>

Use Variables
You can make use of variables to store values and print later like any conventional script. If var keyword is not used, then the value is stored in the variable and printed. Whereas if var keyword is used, then the value is stored but not printed. You can print variables using console.log().
$ node
> x = 10
10
> var y = 10
undefined
> x + y
20
> console.log("Hello World")
Hello World
undefined

Multiline Expression
Node REPL supports multiline expressions similar to JavaScript. Let's check the following do-while loop in action −
$ node
> var x = 0
undefined
> do {
   x++;
  console.log("x: " + x);
   } 
while ( x < 5 );
x: 1
x: 2
x: 3
x: 4
x: 5
undefined
>

... comes automatically when you press Enter after the opening bracket. Node automatically checks the continuity of expressions.
Underscore Variable
You can use underscores (_) to get the last result −
$ node
> var x = 10
undefined
> var y = 20
undefined
> x + y
30
> var sum = _
undefined
> console.log(sum)
30
undefined
>

Stopping REPL
As mentioned above, you will need to use ctrl-c twice to come out of Node.js REPL.
$ node
>
(^C again to quit)
>

---------------------------------------------------------------------------------------------------------------------

REPL Command	Description
.help				Display help on all the commands
tab Keys			Display the list of all commands.
Up/Down Keys		See previous commands applied in REPL.
.save filename		Save current Node REPL session to a file.
.load filename		Load the specified file in the current Node REPL session.
ctrl + c			Terminate the current command.
ctrl + c (twice)		Exit from the REPL.
ctrl + d			Exit from the REPL.
.break			Exit from multiline expressions.
.clear				Exit from multiline expressions.
---------------------------------------------------------------------------------------------------------------------

Process Object

[1 UI: Data View: WindowObj ]    [2. Server: Data pro: ProcessObj ] [ 3. DB: Data sto :JSONObj ]

Each Node.js script runs in a process. It includes a process object to get all the information about the current process of Node.js applications.

The following example shows how to get process information in REPL using a process object.
---------------------------------------------------------------------------------------------------------------------
> process.execPath 
'C:\\Program Files\\nodejs\\node.exe'
> process.pid
1652
> process.cwd()
'C:\\'
---------------------------------------------------------------------------------------------------------------------

Module in Node.js 
“Module in Node.js is a simple or complex functionality organized in single or multiple JavaScript files which can be reused throughout the Node.js application.”

Each module in Node.js has its own context, so it cannot interfere with other modules or pollute the global scope. Also, each module can be placed in a separate .js file under a separate folder.

Node.js implements CommonJS modules standard  [ https://requirejs.org/docs/commonjs.html ]. CommonJS is a group of volunteers who define JavaScript standards for web-server, desktop, and console applications.

Module Types

Node.js includes three types of modules:

Core Modules [ http ]
Local Modules [ AppRoutingModule ]
Third Party Modules [ ngTable module ]

NodeJs Core Modules

Node.js is a lightweight framework. The core modules include bare minimum functionalities of Node.js. These core modules are compiled into its binary distribution and loaded automatically when Node.js processes start. However, you need to import the core module first in order to use it in your application.

The following table lists some of the important core modules in Node.js.


Core Module
Description
http
http module includes classes, methods and events to create Node.js http server.
url
The url module includes methods for URL resolution and parsing.
querystring
The querystring module includes methods to deal with query strings.
path
The path module includes methods to deal with file paths.
fs
fs module includes classes, methods, and events to work with file I/O.
util
The util module includes utility functions useful for programmers.




Loading Core Modules

In order to use Node.js core or NPM modules, you first need to import it using require() function as shown below.
---------------------------------------------------------------------------------------------------------------------

 
var http = require("http");
// obj = import 'module Name'
 

-------------------------------------------------------------------------------------------------------------

As per above syntax, specify the module name in the require() function. The require() function will return an object, function, property or any other JavaScript type, depending on what the specified module returns.

The following example demonstrates how to use Node.js http module to create a web server.

Example: Load and Use Core http Module
---------------------------------------------------------------------------------------------------------------------

var http = require("http");
// obj = import 'module Name'
var server = http.createServer(function (req, res) {
 //write code here
});
server.listen(5000); // client port
 

---------------------------------------------------------------------------------------------------------------------
In the above example, require() function returns an object because http module returns its functionality as an object, you can then use its properties and methods using dot ( . )  notation e.g. http.createServer().


Node.Js Local Modules

Local modules are modules created locally in your Node.js application. 
These modules include different functionalities of your application in separate files and folders. 
You can also package it and distribute it via NPM, so that the Node.js community can use it. 
For example, if you need to connect to MongoDB and fetch data then you can create a module for it, which can be reused in your application.

Writing a Simple Module:
Let's write a simple logging module which logs the information, warning or error to the console.

In Node.js, the module should be placed in a separate JavaScript file. So, create a Log.js file and write the following code in it.


log.js
---------------------------------------------------------------------------------------------------------------------

var log = {
 info: function (info) {
   console.log("Info: " + info);
 },
 warning: function (warning) {
   console.log("Warning: " + warning);
 },
 error: function (error) {
   console.log("Error: " + error);
 },
};
 
module.exports = log;
 

---------------------------------------------------------------------------------------------------------------------



In the above example of the logging module, we have created an object with three functions - info(), warning() and error(). At the end, we have assigned this object to module.exports. The module.exports in the above example exposes a log object as a module.

The module.exports is a special object which is included in every JS file in the Node.js application by default. Use module.exports or exports to expose a function, object or variable as a module in Node.js.

Now, let's see how to use the above logging module in our application.
Loading Local Module
To use local modules in your application, you need to load it using require() function in the same way as core module. However, you need to specify the path of the JavaScript file of the module.
The following example demonstrates how to use the above logging module contained in Log.js.

app.js
---------------------------------------------------------------------------------------------------------------------
var myLogModule = require("./log.js");
console.log("myLogModule : ", myLogModule);
myLogModule.info("Node.js started");
 
---------------------------------------------------------------------------------------------------------------------

In the above example, app.js is using a log module. First, it loads the logging module using require() function and the specified path where the logging module is stored. The logging module is contained in the Log.js file in the root folder. So, we have specified the path './Log.js' in the require() function. The '.' denotes a root folder.

The require() function returns a log object because the logging module exposes an object in Log.js using module.exports. So now you can use the logging module as an object and call any of its functions using dot notation e.g myLogModule.info() or myLogModule.warning() or myLogModule.error().


Run the above example using the command prompt (in Windows) as shown below.

C:\> node app.js 
Info: Node.js started

module.exports
We will learn how to expose different types as a module using module.exports.

The module.exports or exports is a special object which is included in every JS file in the Node.js application by default. 
The module is a variable that represents the current module and exports is an object that will be exposed as a module.
So, whatever you assign to module.exports or exports, will be exposed as a module.

Let's see how to expose different types as a module using module.exports.

Export Literals
The following example exposes a simple string message as a module in Message.js.

message.js
----------------------------------------------------------------------------------------------------
// module.exports = "Hello world";
 
exports.msg = "Hello world";
 
// {
//   lit: {
//     msg: "Hello world";
//   }
// }
 

----------------------------------------------------------------------------------------------------

import this message module and use it as shown below.

app.js
----------------------------------------------------------------------------------------------------
var lit = require("./literals");
console.log("lit : ", lit);
console.log("lit : ", lit.msg);
 

----------------------------------------------------------------------------------------------------

Note: 
You must specify './' as a path to the root folder to import a local module. However, you do not need to specify a path to import Node.js core module or NPM module in the require() function.

Export Object
exports is an object. So, you can attach properties or methods to it. The following example exposes an object with a string property in Message.js file. 

message.js

exports.SimpleMessage = 'Hello world';
//or module.exports.SimpleMessage = 'Hello world';

we have attached a property "SimpleMessage" to the exports object. Now, import and use this module as shown below.

app.js

var msg = require('./Messages.js'); 
console.log(msg.SimpleMessage);

In the above example, require() function will return an object { SimpleMessage : 'Hello World'} and assign it to the msg variable. So, now you can use msg.SimpleMessage.

Run the above example by writing node app.js in the command prompt and see the output as shown below.

C:\> node app.js 
 Hello World. 
-------------------------------------------------------------------------------------------------------------------
The same way as above, you can expose an object with function. The following example exposes an object with log function as a module.

Log.js
module.exports.log = function (msg) {
 console.log(msg);
};
 

 
The above module will expose an object- 
 
{ 
log : function(msg){ 
console.log(msg); 
}
} 
 
Use the above module as shown below.

app.js

var msg = require("./log.js");
console.log("msg", msg);
msg.log("Hello World");
 



C:\> node app.js 
Hello World
--------------------------------------------------------------------
You can also attach an object to module.exports as shown below.

data.js
module.exports = {
 firstName: "James",
 lastName: "Bond",
};
 

app.js
var person = require("./data.js");
 
// API : object
 
console.log(person.firstName + " " + person.lastName);
 

Run the above example and see the result as shown below.
C:\> node app.js 
James Bond
--------------------------------------------------------------------

Export Function
You can attach an anonymous function to the exports object as shown below.

Log.js

module.exports = function (msg) { 
console.log(msg); 
};



Now, you can use the above module as below.

app.js

var msg = require('./Log.js'); 
msg('Hello World'); 


The msg variable becomes a function expression in the above example. So, you can invoke the function using parenthesis (). Run the above example and see the output as shown below.
C:\> node app.js 
Hello World
--------------------------------------------------------------------

Export function as a class
In JavaScript, a function can be treated like a class. The following example exposes a function which can be used like a class.
Person.js

module.exports = function (firstName, lastName) {
 this.firstName = firstName;
 this.lastName = lastName;
 this.fullName = function () {
   return this.firstName + " " + this.lastName;
 };
};
 
 
// IIFE     or      fatArrow


The above module can be used as shown below.

app.js
var person = require("./Person.js");
console.log("person : ", person);
 
var person1 = new person("James", "Bond");
console.log(person1.fullName());
 

As you can see, we have created a personal object using a new keyword. Run the above example as below.
C:\> node app.js 
James Bond
In this way, you can export and import a local module created in a separate file under the root folder.

Node.js also allows you to create modules in sub folders. Let's see how to load modules from sub folders.


 

What is Callback [ setTimeOut, setInterval, eves, etc ]?   CallBackHell -> Promises -> async-await-> Observables
Callback is an asynchronous equivalent for a function. A callback function is called at the completion of a given task. Node makes heavy use of callbacks. All the APIs of Node are written in such a way that they support callbacks.

Blocking Code

 
var fs = require("fs");
var data = fs.readFileSync("file.txt");
console.log(data.toString()); // Not, Warn, Fat, Par
console.log("Task Completed Successfully..!");
 

Non-Blocking Code 

 
 
var fs = require("fs");
 
fs.readFile('file.txt', function (err, data) {
  if (err) return console.error(err);
  	console.log(data.toString());
	console.log("Task Completed Successfully...");
});
 





Redirecting requests
var http = require("http"); // Import Node.js core module
var server = http.createServer(function (req, res) {
 //create web server
 
 if (req.url == "/") {
   res.writeHead(200, { "Content-Type": "text/html" });
   res.write('<form action="send" method="post">'); // GET -> PARAMOBJ, POST-> BODYObj
   res.write('<input type="text" ><br>');
   res.write('<input type="submit">');
   res.write("</form>");
   return res.end();
 } else if (req.url == "/send" && req.method === "POST") {
   res.statusCode = 302;
   res.setHeader("Location", "/");
   return res.end();
 } else res.end("Invalid Request!");
});
server.listen(5000); //6 - listen for any incoming requests
 

Nodejs Framework





Express JS
Makes Node.js web application development fast and easy.

Advantages Of Express.js
Easy to configure and customize.
Allows you to define routes of your application based on HTTP methods and URLs.
Includes various middleware [ Mongoose ] modules which you can use to perform additional tasks on request and response.
Easy to integrate with different template engines like KendoUI, Jade, Vash, EJS etc. 
Allows you to define an error handling middleware.
Easy to serve static files and resources of your application.
Allows you to create a REST API server.
Easy to connect with databases such as MongoDB, Redis, MySQL.
Installation :
You can install express.js using npm. The following command will install the latest version of express.js globally on your machine so that every Node.js application on your machine can use it.

node.js


express


The following command will create package.json  for  express.js in the project folder.
2> npm init --yes

The following command will install the latest version of express.js globally in your project folder.
1> npm install -g express


The following command will install the latest version of express.js local to your project folder.
3> npm install express --save
As you know, --save will update the package.json file by specifying express.js dependency.

npm install -g nodemon             [ nodemon filename : ex. nodemon app.js ]
npm install nodemon
